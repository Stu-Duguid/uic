TLT.addModule("crossSession",(function(e){"use strict";var t,s,o="TLTPID";function i(){var s,i,n;i=Date.now(),(s=(n=t.sessions)[n.length-1]).duration=Math.floor((i-s.startTime)/1e3),n.forEach((function(e){var t;e.timeSince=(t=Date.now()-e.startTime)<1e3?t+" ms":t<6e4?Math.floor(t/1e3)+" sec":t<36e5?Math.floor(t/6e4)+" min":t<864e5?Math.floor(t/36e5)+" hr":Math.floor(t/864e5)+" days"})),t.recentActivity=i,e.utils.setCookie(o,JSON.stringify(t),864e4,void 0,void 0,false,"Lax")}return{init:function(){var n,a,r,l;(a=TLT.getTLTSessionCookieInfo()).tltCookieName,r=a.tltCookieValue,l=e.utils.getCookieValue(o),t=null===l?{tltpid:r,sessions:[],sessionCount:0,recentActivity:0}:JSON.parse(decodeURIComponent(l)),s=!1,n=t.sessions,(0==t.sessionCount||Date.now()-t.recentActivity>18e5||r!==n[n.length-1].tltsid)&&(s=!0,t.sessions.push({tltsid:r,startTime:e.getStartTime()}),t.sessions.length>10&&t.sessions.shift(),t.sessionCount++),i()},destroy:function(){},onevent:function(o){if(i(),"load"===o.type)s&&(s=!1,n="Session History",e.post({type:5,customEvent:{name:"crossSession",description:n,data:t}}));var n},version:"1.0"}}));
