TLT.addModule("crossSession",function(t){function e(t){const e=60,o=60*e,s=24*o;return t<e?t+" sec":t<o?Math.floor(t/e)+" min":t<s?Math.floor(t/o)+" hr":Math.floor(t/s)+" days"}function o(o){let n,i;l=Math.floor(Date.now()/1e3),n=i[0],n.duration=l-n.startTime,i.forEach(function(t){t.timeSince=e(l-t.startTime)});let a={sessions:i,timestamp:l,listens:c};window.localStorage.setItem(s,JSON.stringify(a)),o&&t.post({type:5,customEvent:{name:"crossSession",description:"Past session data",data:a}})}const s="TLTdata",n=174e4,i=100;let a=!1,r=[],l=0,c=[],u=!1;return{init:function(){function e(t){let e;try{e=window[t];const o="__storage_test__";return e.setItem(o,o),e.removeItem(o),!0}catch(t){return console.debug("Tealeaf: cannot write to localstorage"),!1}}if(a=e("localStorage"),!a)return;try{let t=localStorage.getItem(s);if(t){let e=JSON.parse(t);r=e.sessions||[],l=e.timestamp||0,c=e.listens||[]}else r=[],l=0,c=[]}catch(t){return void(a=!1)}let f=TLT.getTLTSessionCookieInfo(),d=f?f.tltCookieValue:"";(0==r.length||Date.now()-l>n||d!==r[0].tltsid)&&(u=!0,r.unshift({tltsid:d,startTime:Math.floor(t.getStartTime()/1e3),duration:0,events:[],referrer:""}),r.length>i&&r.pop()),o(!1)},onevent:function(t){if(!a)return;let e=!1;switch(t.type){case"load":u&&(u=!1,e=!0);case"visibilitychange":case"pagehide":case"unload":o(e)}},version:"2.0"}});